#!/bin/bash
# FrankenPHP build configuration for PHP 8.4
# Note: IMAP extension removed in PHP 8.4

export PHP_VERSION=8.4
export FRANKENPHP_VERSION=DigitalNode

# Extensions (77 official FrankenPHP extensions + mongodb = 78 total)
export PHP_EXTENSIONS="amqp,apcu,ast,bcmath,brotli,bz2,calendar,ctype,curl,dba,dom,exif,fileinfo,filter,ftp,gd,gmp,gettext,iconv,igbinary,imagick,intl,ldap,lz4,mbregex,mbstring,memcache,memcached,mysqli,mysqlnd,opcache,openssl,password-argon2,parallel,pcntl,pdo,pdo_mysql,pdo_pgsql,pdo_sqlite,pdo_sqlsrv,pgsql,phar,posix,protobuf,readline,redis,session,shmop,simplexml,soap,sockets,sodium,sqlite3,ssh2,sysvmsg,sysvsem,sysvshm,tidy,tokenizer,xlswriter,xml,xmlreader,xmlwriter,xsl,xz,zip,zlib,yaml,zstd,mongodb"

# Required libraries (matches official FrankenPHP build)
export PHP_EXTENSION_LIBS="libavif,nghttp2,nghttp3,ngtcp2,watcher"

# Caddy modules (add custom modules here if needed)
export XCADDY_ARGS=""

# Build options
export CLEAN=1
export NO_COMPRESS=1
export DEBUG_SYMBOLS=0
export MIMALLOC=0
